<!DOCTYPE html>
<html>
<head>
  <title>Cadastrar Produtos Iniciais</title>
  <!-- Use a versão COMPATÍVEL (8.10.0) -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>
<body>
  <h1>Cadastrar Produtos no Firebase</h1>
  <button id="btnCadastrar">Cadastrar Produtos</button>
  <div id="status" style="margin-top: 20px;"></div>

  <script>
    // Configuração do Firebase (SUBSTITUA pelos seus dados)
    const firebaseConfig = {
  apiKey: "AIzaSyCOIPGdGlJazNtrnrp6j8MbXUOqW7OSspQ",
  authDomain: "restaurante-e2ff0.firebaseapp.com",
  projectId: "restaurante-e2ff0",
  storageBucket: "restaurante-e2ff0.firebasestorage.app",
  messagingSenderId: "839289505253",
  appId: "1:839289505253:web:2ccdd32cc64fc010b4db0c"
};

    // Inicialize o Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Lista de produtos para cadastrar
    const produtos = [
      { 
        nome: "X-Burguer", 
        descricao: "Pão, carne, queijo e molho especial.", 
        preco: 15.00, 
        img: "img/xburguer.jpg",
        createdAt: firebase.firestore.FieldValue.serverTimestamp() 
      },
      { 
        nome: "Batata Frita", 
        descricao: "Batata crocante frita.", 
        preco: 10.00, 
        img: "img/batata.jpg",
        createdAt: firebase.firestore.FieldValue.serverTimestamp() 
      },
      { 
        nome: "Refrigerante", 
        descricao: "Refrigerante gelado.", 
        preco: 5.00, 
        img: "img/refri.jpg",
        createdAt: firebase.firestore.FieldValue.serverTimestamp() 
      }
    ];

    document.getElementById('btnCadastrar').addEventListener('click', async () => {
      const btn = document.getElementById('btnCadastrar');
      btn.disabled = true;
      btn.textContent = "Cadastrando...";
      
      const statusDiv = document.getElementById('status');
      statusDiv.innerHTML = "<p>Iniciando cadastro...</p>";

      try {
        // Cadastra cada produto
        for (const produto of produtos) {
          await db.collection("produtos").add(produto);
          statusDiv.innerHTML += `<p>✅ ${produto.nome} cadastrado</p>`;
          console.log("Produto cadastrado:", produto.nome);
        }
        
        statusDiv.innerHTML += "<p><strong>Todos os produtos foram cadastrados com sucesso!</strong></p>";
        alert("Cadastro concluído! Verifique o Firestore.");
      } catch (error) {
        console.error("Erro:", error);
        statusDiv.innerHTML += `<p style="color:red;">❌ Erro: ${error.message}</p>`;
        alert("Erro ao cadastrar. Verifique o console (F12).");
      } finally {
        btn.disabled = false;
        btn.textContent = "Cadastrar Produtos";
      }
    });
  </script>
</body>
</html>