<!DOCTYPE html>
<html>
<head>
  <title>Cadastrar Produtos Iniciais</title>
</head>
<body>
  <h1>Cadastrar Produtos no Firebase</h1>
  <button id="btnCadastrar">Cadastrar Produtos</button>
  <div id="status"></div>

  <!-- Adicione os scripts do Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js"></script>

  <script>
   
   const firebaseConfig = {
  apiKey: "AIzaSyCOIPGdGlJazNtrnrp6j8MbXUOqW7OSspQ",
  authDomain: "restaurante-e2ff0.firebaseapp.com",
  projectId: "restaurante-e2ff0",
  storageBucket: "restaurante-e2ff0.firebasestorage.app",
  messagingSenderId: "839289505253",
  appId: "1:839289505253:web:2ccdd32cc64fc010b4db0c"
};
    // Inicialize o Firebase
    try {
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    
    console.log("Firebase inicializado com sucesso!"); // Verifique no console

    // Produtos que serão cadastrados (os mesmos do seu script.js)
    const produtos = [
      { 
        nome: "X-Burguer", 
        descricao: "Pão, carne, queijo e molho especial.", 
        preco: 15.00, 
        img: "img/xburguer.jpg",
        createdAt: new Date().toISOString() 
      },
      { 
        nome: "Batata Frita", 
        descricao: "Batata crocante frita.", 
        preco: 10.00, 
        img: "img/batata.jpg",
        createdAt: new Date().toISOString() 
      },
      { 
        nome: "Refrigerante", 
        descricao: "Refrigerante gelado.", 
        preco: 5.00, 
        img: "img/refri.jpg",
        createdAt: new Date().toISOString() 
      }
    ];

    document.getElementById('btnCadastrar').addEventListener('click', async () => {
      console.log("Botão clicado - Iniciando cadastro...");
      
      try {
        const statusDiv = document.getElementById('status');
        statusDiv.innerHTML = "Conectando ao Firebase...";
        
        // Teste de conexão
        const testDoc = await db.collection("teste").doc("conexao").get();
        console.log("Teste de conexão:", testDoc.exists ? "OK" : "Não existe (mas conectou)");
        
        // Cadastra produtos
        statusDiv.innerHTML += "<p>Cadastrando produtos...</p>";
        
        for (const produto of produtos) {
          const docRef = await db.collection("produtos").add(produto);
          console.log(`Produto ${produto.nome} cadastrado com ID:`, docRef.id);
          statusDiv.innerHTML += `<p>✅ ${produto.nome} cadastrado (ID: ${docRef.id})</p>`;
        }
        
        statusDiv.innerHTML += "<p><strong>✅ Todos cadastrados!</strong></p>";
      
      } catch (error) {
        console.error("Erro detalhado:", error);
        document.getElementById('status').innerHTML = `
          <p style="color:red;">❌ ERRO GRAVE:</p>
          <p>${error.message}</p>
          <p>Verifique o console (F12) para detalhes</p>
        `;
      }
    });

  } catch (initError) {
    console.error("Erro na inicialização do Firebase:", initError);
    document.body.innerHTML = `
      <h1 style="color:red;">Erro na configuração do Firebase</h1>
      <p>${initError.message}</p>
      <p>Verifique o console (F12) para detalhes</p>
    `;
  }
</script>